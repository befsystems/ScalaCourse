# Структура системы промптов

## Концепция

Модульная иерархическая система промптов, позволяющая:
- Переиспользовать готовые блоки промптов
- Композировать сложные промпты из простых модулей
- Версионировать и эволюционировать промпты

## Структура директорий

```
prompts/
├── modules/                    # Модули промптов (переиспользуемые блоки)
│   ├── common/                 # Общие модули для всех типов промптов
│   │   ├── context.md          # Контекст проекта (Scala, Stepik, аудитория)
│   │   ├── formatting.md       # Требования к форматированию
│   │   ├── code-style.md       # Стиль кода и best practices
│   │   └── language.md         # Требования к языку изложения
│   │
│   ├── lesson/                 # Модули для создания уроков
│   │   ├── structure.md        # Структура урока
│   │   ├── theory.md           # Блок теоретической части
│   │   ├── examples.md         # Требования к примерам
│   │   ├── exercises.md        # Блок упражнений
│   │   └── assessment.md       # Критерии оценки
│   │
│   ├── exercise/               # Модули для создания упражнений
│   │   ├── types.md            # Типы упражнений
│   │   ├── tests.md            # Требования к тестам
│   │   ├── hints.md            # Система подсказок
│   │   └── difficulty.md       # Уровни сложности
│   │
│   ├── quality/                # Модули проверки качества
│   │   ├── checklist.md        # Чек-листы
│   │   ├── review.md           # Критерии ревью
│   │   └── validation.md       # Правила валидации
│   │
│   └── pedagogy/               # Педагогические модули
│       ├── progression.md      # Прогрессивное усложнение
│       ├── motivation.md       # Мотивация студентов
│       ├── engagement.md       # Вовлечение
│       └── feedback.md         # Обратная связь
│
├── templates/                  # Готовые шаблоны (композиции модулей)
│   ├── lesson-basic.md         # Базовый урок для начинающих
│   ├── lesson-advanced.md      # Продвинутый урок
│   ├── exercise-coding.md      # Упражнение на написание кода
│   ├── exercise-quiz.md        # Тестовое упражнение
│   └── refactor-material.md    # Рефакторинг материалов
│
├── composed/                   # Сгенерированные составные промпты
│   ├── [topic-name]/           # По темам
│   │   ├── v1.md
│   │   ├── v2.md
│   │   └── final.md
│   └── README.md               # Индекс составных промптов
│
├── agents/                     # Конфигурация агентов/ролей
│   ├── prompt-architect-activation.md
│   ├── prompt-architect-guidelines.md
│   └── quick-commands.md
│
└── STRUCTURE.md               # Этот файл
```

## Принципы работы с модулями

### 1. Модули - атомарные блоки

Каждый модуль:
- Решает одну конкретную задачу
- Самодостаточен и понятен без контекста
- Может комбинироваться с другими модулями
- Версионируется в Git

### 2. Шаблоны - композиции модулей

Шаблон = набор ссылок на модули + инструкции по сборке

Пример структуры шаблона:
```markdown
# Шаблон: Базовый урок для начинающих

## Включаемые модули
- prompts/modules/common/context.md
- prompts/modules/common/code-style.md
- prompts/modules/lesson/structure.md
- prompts/modules/lesson/theory.md
- prompts/modules/lesson/examples.md
- prompts/modules/pedagogy/progression.md

## Специфические инструкции
[Дополнительные инструкции для конкретного типа урока]
```

### 3. Композиция промптов

Процесс создания составного промпта:

```
1. Выбор шаблона
   └─> templates/lesson-basic.md

2. Сборка модулей
   └─> Чтение всех указанных модулей

3. Добавление специфики
   └─> Тема урока, уровень, особенности

4. Генерация финального промпта
   └─> composed/[topic]/v1.md

5. Применение и итерация
   └─> v2.md, v3.md, final.md
```

## Команды для работы с системой

### Композиция промптов

```
@compose-prompt:
  шаблон: templates/lesson-basic.md
  тема: "Pattern Matching в Scala 3"
  уровень: начальный
  дополнительные_модули:
    - modules/pedagogy/motivation.md
```

### Создание нового модуля

```
@create-module:
  категория: lesson
  название: interactive-elements
  назначение: "Требования к интерактивным элементам урока"
```

## Использование в quick-commands.md

Добавить команды:
- `@compose-prompt` - композиция промпта из модулей
- `@create-module` - создание нового модуля

## Примеры использования

### Пример 1: Создание урока

```
@compose-prompt шаблон=lesson-basic тема="Option и работа с null"

Claude:
1. Читает templates/lesson-basic.md
2. Загружает все указанные модули
3. Собирает финальный промпт
4. Сохраняет в composed/option-null/v1.md
5. Применяет промпт для создания урока
```

### Пример 2: Добавление нового модуля

```
@create-module категория=lesson название=video-script

Claude:
1. Создает modules/lesson/video-script.md
2. Структурирует по общему формату модулей
3. Добавляет примеры использования
4. Обновляет документацию
```

## Формат модуля

Каждый модуль следует единой структуре:

```markdown
# Модуль: [Название]

## Назначение
[Для чего используется этот модуль]

## Применимость
- Тип промпта: [уроки/упражнения/ревью/...]
- Обязательный: [да/нет]
- Комбинируется с: [список других модулей]

## Содержание

[Содержимое модуля - инструкции, требования, примеры]

## Примеры использования

[Примеры как модуль применяется в реальных промптах]

## Версия
- Создан: [дата]
- Обновлен: [дата]
- Версия: [номер]
```

## Преимущества системы

✅ **DRY (Don't Repeat Yourself)** - переиспользование блоков
✅ **Консистентность** - единый подход во всех промптах
✅ **Эволюция** - легко улучшать модули централизованно
✅ **Гибкость** - легко создавать новые комбинации
✅ **Версионирование** - история изменений в Git
✅ **Документированность** - явная структура и зависимости
✅ **Масштабируемость** - легко добавлять новые модули

## Интеграция с существующей системой

Существующие файлы:
- `prompt-architect-guidelines.md` → становится набором модулей
- `prompt-architect-activation.md` → остается как есть
- `quick-commands.md` → дополняется новыми командами

## Миграция

1. Разбить `prompt-architect-guidelines.md` на модули
2. Создать первые шаблоны из существующих примеров
3. Добавить команды композиции в `quick-commands.md`
4. Создать начальную структуру планов

---

**Версия**: 1.0
**Дата**: 2025-12-22
