# Руководство по архитектуре промптов для курса Scala

## Введение

Этот документ содержит принципы, практики и шаблоны для создания эффективных промптов при работе с Claude Code над материалами курса Scala для платформы Stepik.

## Основные принципы эффективных промптов

### 1. Ясность и конкретность

**Хорошо:**
```
Создай урок о pattern matching в Scala 3, который:
- Объясняет синтаксис match expressions
- Демонстрирует работу с case классами
- Показывает exhaustiveness checking
- Содержит 3-4 практических примера
- Включает упражнение на применение
```

**Плохо:**
```
Напиши что-нибудь про pattern matching
```

### 2. Контекст и ограничения

Всегда указывайте:
- **Целевую аудиторию**: начинающие, средний уровень, продвинутые
- **Объем материала**: примерное количество слов, примеров, упражнений
- **Технические ограничения**: версия Scala, используемые библиотеки
- **Стиль изложения**: академический, практический, conversational

### 3. Структурированность

Используйте четкую структуру в промпте:
- Цель задачи
- Требования
- Ограничения
- Примеры желаемого результата
- Критерии успеха

### 4. Примеры и референсы

Включайте:
- Ссылки на существующие материалы курса для единообразия
- Примеры желаемого стиля
- Антипримеры (что НЕ нужно делать)

## Шаблоны промптов

### Шаблон 1: Создание урока

```markdown
# Задача: Создание урока "[Название темы]"

## Контекст
- Целевая аудитория: [начинающие/средний уровень/продвинутые]
- Место в курсе: [раздел, номер урока]
- Предварительные знания: [что студент уже знает]
- Scala версия: 3.3.1

## Цели обучения
После прохождения урока студент должен уметь:
1. [Цель 1]
2. [Цель 2]
3. [Цель 3]

## Требования к содержанию
- Теоретическая часть: [объем, ключевые концепции]
- Практические примеры: [количество, сложность]
- Код примеры: [требования к коду]
- Упражнения: [тип, количество]

## Структура урока
1. Введение и мотивация
2. Объяснение концепции
3. Примеры использования
4. Распространенные ошибки
5. Лучшие практики
6. Практическое задание

## Стиль изложения
- [Описание желаемого стиля]
- Использовать аналогии: [да/нет]
- Уровень формальности: [академический/практический/разговорный]

## Технические требования
- Все примеры должны компилироваться в Scala 3.3.1
- Использовать идиоматичный Scala 3 синтаксис
- Избегать deprecated функций
- Код должен следовать best practices

## Критерии успеха
- [ ] Все цели обучения покрыты
- [ ] Примеры ясные и компилируются
- [ ] Материал соответствует уровню аудитории
- [ ] Структура логична и последовательна
```

### Шаблон 2: Создание упражнения

```markdown
# Задача: Создание упражнения "[Название]"

## Контекст
- Связанный урок: [название урока]
- Проверяемые концепции: [список концепций]
- Сложность: [легкое/среднее/сложное]

## Требования к упражнению
- Тип: [код/тест/множественный выбор/написание кода]
- Формат проверки: [автоматические тесты/ручная проверка]
- Примерное время выполнения: [минуты]

## Описание задачи
[Четкое описание того, что должен сделать студент]

## Входные данные и ожидаемый результат
- Входные данные: [описание]
- Ожидаемый результат: [описание]

## Подсказки и scaffolding
- Уровень помощи: [минимальный/средний/значительный]
- Предоставить: [заготовку кода/сигнатуры функций/тесты]

## Тесты
- Количество тестовых случаев: [количество]
- Покрытие edge cases: [да/нет, какие]
- Видимые/скрытые тесты: [соотношение]

## Критерии оценки
- [ ] Задача проверяет целевые концепции
- [ ] Сложность соответствует уровню
- [ ] Тесты полные и понятные
- [ ] Есть обработка граничных случаев
```

### Шаблон 3: Рефакторинг/улучшение существующего материала

```markdown
# Задача: Улучшение материала "[Название]"

## Текущее состояние
- Расположение: [путь к файлу]
- Текущие проблемы: [список проблем]
- Обратная связь: [комментарии студентов/преподавателей]

## Цели улучшения
1. [Цель 1]
2. [Цель 2]

## Что нужно сохранить
- [Элементы, которые работают хорошо]

## Что нужно изменить
- [Конкретные изменения]

## Ограничения
- Не менять: [что должно остаться неизменным]
- Обратная совместимость: [требования]

## Критерии успеха
- [ ] Проблемы решены
- [ ] Качество улучшилось
- [ ] Сохранена согласованность с курсом
```

## Чек-лист качества промпта

Перед использованием промпта проверьте:

### Полнота
- [ ] Указана четкая цель
- [ ] Определен контекст и аудитория
- [ ] Перечислены все требования
- [ ] Указаны технические ограничения
- [ ] Определены критерии успеха

### Ясность
- [ ] Формулировки недвусмысленные
- [ ] Технические термины определены
- [ ] Примеры конкретные
- [ ] Нет противоречивых требований

### Достижимость
- [ ] Задача реалистична для одной сессии
- [ ] Требования не противоречат друг другу
- [ ] Есть вся необходимая информация
- [ ] Объем соответствует времени выполнения

### Измеримость
- [ ] Можно проверить результат
- [ ] Критерии успеха конкретные
- [ ] Определены выходные артефакты

## Специфика работы с учебными материалами

### Принципы педагогического дизайна

1. **Прогрессивное усложнение**: каждый урок строится на предыдущих знаниях
2. **Активное обучение**: теория подкрепляется практикой
3. **Обратная связь**: упражнения дают понятные сообщения об ошибках
4. **Мотивация**: показываем практическую ценность концепций

### Структура учебного материала

```
Введение (Зачем?)
  ↓
Объяснение (Что?)
  ↓
Демонстрация (Как?)
  ↓
Практика (Делай сам)
  ↓
Закрепление (Применение)
```

### Требования к примерам кода

1. **Компилируемость**: все примеры должны компилироваться
2. **Идиоматичность**: использовать идиомы Scala 3
3. **Читаемость**: код должен быть понятен новичкам
4. **Практичность**: примеры из реальной жизни
5. **Прогрессивность**: от простого к сложному

### Типичные ошибки в промптах

#### ❌ Слишком общее

```
Создай урок про collections в Scala
```

**Проблема**: Не указана аудитория, объем, конкретные коллекции, уровень детализации.

#### ❌ Перегруженность

```
Создай урок про List, Set, Map, Vector, Array, Option, Either, Try, Future,
включая все методы, все операции, все edge cases, полное объяснение
внутренней имплементации, производительность, сравнение с Java...
```

**Проблема**: Слишком много для одного урока. Нужно разбить на несколько.

#### ❌ Противоречивые требования

```
Создай короткий урок на 5 минут, который детально объясняет монады,
функторы, аппликативы с множеством примеров и упражнений.
```

**Проблема**: Объем не соответствует времени и глубине покрытия.

#### ✅ Правильно

```
Создай вводный урок про List в Scala 3 для начинающих (15-20 минут):

Цели:
- Понимание что такое List и когда его использовать
- Умение создавать списки разными способами
- Знание основных операций: head, tail, ::, map, filter

Структура:
1. Что такое List (2-3 минуты)
2. Создание списков: List(...), :: , Nil (3-4 минуты)
3. Основные операции с примерами (8-10 минут)
4. Практическое упражнение (5 минут)

Требования:
- 4-5 примеров кода
- 1 упражнение с автотестами
- Избегать сложных концепций (fold, flatMap - оставить на следующий урок)
```

## Работа с форматом Stepik

### Особенности платформы

1. **Markdown с ограничениями**: проверяйте совместимость синтаксиса
2. **Интерактивные упражнения**: используйте возможности платформы
3. **Автопроверка**: все упражнения должны иметь тесты
4. **Структурированность**: используйте секции и подсекции

### Конвертация .step ↔ .md

При работе с файлами курса:
- `.step` - оригинальный формат Stepik (JSON)
- `.md` - удобный для редактирования формат

Промпт должен указывать целевой формат результата.

## Примеры промптов из проекта

### Пример 1: Работа с существующим материалом

```markdown
Проанализируй урок из файла `content/[lesson-name]/intro.md` и:

1. Оцени соответствие целевой аудитории (начинающие программисты)
2. Проверь логическую последовательность изложения
3. Найди места, где нужны дополнительные примеры
4. Предложи улучшения структуры

Используй принципы из `prompts/agents/prompt-architect-guidelines.md`
```

### Пример 2: Создание серии связанных уроков

```markdown
Создай серию из 3 уроков про типы в Scala 3:

Урок 1: Базовые типы (для начинающих)
- Value types, reference types
- Иерархия типов Any, AnyVal, AnyRef
- Nothing, Null, Unit

Урок 2: Параметрические типы (средний уровень)
- Generics
- Variance (covariance, contravariance, invariance)
- Type bounds

Урок 3: Продвинутые типы (продвинутый уровень)
- Union и intersection types (Scala 3)
- Opaque types
- Match types

Каждый урок:
- 20-25 минут материала
- 3-5 примеров кода
- 2 практических упражнения
- Тесты для упражнений

Связность: каждый урок ссылается на предыдущие и готовит к следующему.
```

## Итеративная работа с промптами

### Цикл улучшения

1. **Первая версия**: создать промпт по шаблону
2. **Тестирование**: применить промпт, получить результат
3. **Анализ**: оценить качество результата
4. **Уточнение**: добавить детали, примеры, ограничения
5. **Повтор**: применить улучшенный промпт

### Версионирование промптов

Храните итерации важных промптов:
```
prompts/lessons/pattern-matching-v1.md
prompts/lessons/pattern-matching-v2.md
prompts/lessons/pattern-matching-final.md
```

Добавляйте комментарии о том, что изменилось и почему.

## Использование этого руководства

При создании нового промпта:

1. Определите тип задачи → выберите подходящий шаблон
2. Заполните шаблон, используя принципы из раздела "Основные принципы"
3. Пройдитесь по чек-листу качества
4. Проверьте специфические требования для учебных материалов
5. Сохраните промпт в соответствующую папку `prompts/`
6. После применения - задокументируйте результаты и улучшения

## Дополнительные ресурсы

- [Официальная документация Scala 3](https://docs.scala-lang.org/scala3/)
- [Stepik API и форматы](https://stepik.org/api/docs)
- Примеры существующих промптов в `prompts/templates/`

## Обновление этого документа

Это живой документ. При обнаружении новых паттернов, проблем или лучших практик:

1. Добавьте пример в соответствующую секцию
2. Обновите шаблоны если нужно
3. Зафиксируйте изменение в Git с описательным commit message
4. Укажите дату обновления ниже

**Последнее обновление**: 2025-12-22
**Версия**: 1.0
