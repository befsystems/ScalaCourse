# Модуль: Стиль кода

## Назначение
Определяет требования к стилю кода в примерах и упражнениях.

## Применимость
- Тип промпта: уроки, упражнения
- Обязательный: да (для контента с кодом)
- Комбинируется с: context, lesson/*, exercise/*

## Содержание

### Общие требования

1. **Идиоматичность Scala 3**
   - Использовать новый синтаксис Scala 3 (indent-based, новые ключевые слова)
   - Избегать deprecated функций
   - Следовать best practices Scala 3

2. **Читаемость**
   - Код должен быть понятен начинающим
   - Использовать говорящие имена переменных и функций
   - Избегать чрезмерной краткости в ущерб ясности

3. **Компилируемость**
   - Все примеры кода должны компилироваться без ошибок
   - Указывать необходимые импорты
   - Проверять совместимость с Scala 3.3.1

### Стиль форматирования

```scala
// ✅ Хорошо: indent-based syntax (Scala 3)
def greet(name: String): String =
  val greeting = "Hello"
  s"$greeting, $name!"

// ❌ Плохо: старый синтаксис с фигурными скобками (когда можно без них)
def greet(name: String): String = {
  val greeting = "Hello"
  s"$greeting, $name!"
}

// ✅ Хорошо: использование новых возможностей Scala 3
enum Color:
  case Red, Green, Blue

// ✅ Хорошо: говорящие имена
def calculateTotalPrice(items: List[Item]): Double =
  items.map(_.price).sum

// ❌ Плохо: непонятные сокращения
def calcTot(its: List[Item]): Double =
  its.map(_.p).sum
```

### Комментарии

1. **Когда использовать**:
   - Объяснение неочевидной логики
   - Пояснение концепций для начинающих
   - Указание на важные детали

2. **Когда НЕ использовать**:
   - Код самодокументирован
   - Комментарий дублирует очевидное

```scala
// ✅ Хорошо: полезный комментарий
// Pattern matching проверяет все возможные случаи (exhaustiveness checking)
color match
  case Color.Red   => "Красный"
  case Color.Green => "Зеленый"
  case Color.Blue  => "Синий"

// ❌ Плохо: бесполезный комментарий
// Складываем два числа
def add(a: Int, b: Int) = a + b
```

### Именование

- **Переменные/функции**: camelCase (`totalPrice`, `calculateSum`)
- **Классы/трейты**: PascalCase (`User`, `PaymentProcessor`)
- **Константы**: camelCase или UPPER_CASE для важных констант
- **Пакеты**: lowercase (`com.example.app`)

### Типы

```scala
// ✅ Хорошо: явное указание возвращаемого типа для публичных API
def processUser(user: User): Either[Error, ProcessedUser] = ???

// ✅ Хорошо: вывод типов для локальных переменных
val numbers = List(1, 2, 3, 4, 5)
val doubled = numbers.map(_ * 2)

// ❌ Плохо: отсутствие типа в публичном API
def processUser(user: User) = ???  // Что возвращается?
```

## Примеры использования

В промпте для создания урока:
```
Используй идиоматичный Scala 3 код с indent-based синтаксисом.
Все примеры должны компилироваться.
Имена переменных должны быть понятными начинающим.
Добавляй комментарии только для объяснения концепций.
```

## Версия
- Создан: 2025-12-22
- Обновлен: 2025-12-22
- Версия: 1.0
