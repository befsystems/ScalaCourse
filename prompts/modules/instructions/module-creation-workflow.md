# Module: Module Creation Workflow

## Purpose

Определяет пошаговый процесс создания нового модуля в модульной системе промптов.
Практическое руководство для prompt engineer'а.

## Specification

### Фаза 1: Анализ необходимости

**Перед созданием модуля ответь на вопросы:**

1. **Проверка существующих модулей**
   - Выполни поиск по `prompts/modules/` через Glob/Grep
   - Можно ли переиспользовать существующий модуль?
   - Можно ли скомпоновать решение из нескольких модулей?

2. **Правило трёх повторений** (DRY)
   - Встречается ли паттерн минимум 3 раза?
   - Если нет - не создавай модуль, используй inline-содержимое

3. **Доказанная необходимость**
   - Зачем нужен этот модуль?
   - Какую проблему он решает?
   - Будет ли он переиспользоваться?

**Если ответы положительные → переходи к Фазе 2**

### Фаза 2: Проектирование модуля

**Шаг 1. Определи тип модуля:**

- `roles/` - определение роли/контекста работы
- `rules/` - правила и ограничения поведения
- `standards/` - формальные стандарты и спецификации
- `instructions/` - пошаговые процедуры и workflow

**Шаг 2. Спроектируй содержимое:**

Определи что войдёт в секцию `Specification`:
- Только исполняемая логика (инструкции, правила, методология)
- Без мета-описаний, версий, комментариев "для читателя"
- Самодостаточное содержимое (понятно без устных пояснений)

**Шаг 3. Выбери имя файла:**

- Формат: `<domain>-<entity>.md` (например: `module-creation-workflow.md`)
- Описательное, но лаконичное
- Lowercase с дефисами

### Фаза 3: Реализация

**Шаг 1. Создай файл с обязательной структурой:**

```markdown
# Module: <Module Name>

## Purpose

<Мета-описание: зачем существует модуль>

## Specification

<Исполняемая спецификация поведения>

## Version

* Version: 1.0
* Created: YYYY-MM-DD
* Status: Active
* Notes: <описание изменений>
```

**Шаг 2. Заполни секцию Purpose:**

- Одно-два предложения
- Описывает **зачем** существует модуль
- Не дублирует содержимое Specification
- Для человека-разработчика, не для LLM

**Шаг 3. Заполни секцию Specification:**

Включай ТОЛЬКО:
- Поведенческие инструкции
- Логические правила
- Методологию работы
- Ограничения и инварианты
- Допустимые/недопустимые действия

ИСКЛЮЧАЙ:
- Версии, даты, историю изменений
- Пояснения "для читателя"
- Мета-описания назначения
- Комментарии о процессе разработки

**Шаг 4. Заполни секцию Version:**

- Начальная версия: 1.0
- Дата в формате YYYY-MM-DD
- Status: Active / Draft / Deprecated
- Notes: краткое описание создания/изменений

### Фаза 4: Само-валидация

**Проверь модуль по критериям:**

✅ **Структура:**
- Есть все три секции: Purpose, Specification, Version?
- Названия секций точно совпадают со стандартом?

✅ **Инвариант мета-секций:**
- Если удалить Purpose и Version, поведение модуля не изменится?

✅ **Чистота Specification:**
- Содержит только исполняемую логику?
- Нет мета-информации и версий внутри?

✅ **Самодостаточность:**
- Модуль понятен без устных пояснений?
- Модуль работает при переформулировке задачи?

✅ **Минимализм:**
- Нет избыточных абстракций?
- Нет "универсальности на будущее"?
- Ясность важнее абстрактной гибкости?

**Если все ✅ → модуль готов**
**Если есть ❌ → вернись к соответствующей фазе**

### Фаза 5: Интеграция

**Шаг 1. Подключи модуль в композицию:**

Если модуль должен использоваться в команде/роли:
- Добавь маркер включения `{{путь/к/модулю.md}}`
- Убедись, что путь относительный от корня проекта
- Проверь, что синтаксис корректен (без пробелов)

**Шаг 2. Документируй использование:**

Если нужна ленивая загрузка:
- Добавь ссылку в секцию "Стандарты системы" команды
- Укажи, когда модуль нужно читать
- Опиши, что в нём содержится

**Шаг 3. Обнови метаданные:**

- Если изменялись связанные модули, обнови их Version
- Задокументируй изменения в Notes

### Чеклист готовности модуля

Перед финализацией убедись:

- [ ] Модуль создан по доказанной необходимости
- [ ] Проверены существующие модули на переиспользование
- [ ] Выбран правильный тип (roles/rules/standards/instructions)
- [ ] Структура соответствует стандарту (3 секции)
- [ ] Specification содержит только исполняемую логику
- [ ] Инвариант мета-секций выполняется
- [ ] Модуль самодостаточен и понятен
- [ ] Нет излишней абстракции
- [ ] Модуль подключён в композицию (если нужно)
- [ ] Версионирование корректно

## Version

* Version: 1.0
* Created: 2025-12-24
* Status: Active
* Notes: Initial workflow for module creation process
