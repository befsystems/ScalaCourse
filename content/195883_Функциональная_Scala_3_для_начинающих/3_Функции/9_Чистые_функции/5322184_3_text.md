# Материал (Шаг 3)

## Информация о шаге

- **ID шага**: 5322184
- **Позиция**: 3
- **Тип**: text
- **Курс**: Функциональная Scala 3 для начинающих
- **Экспортирован**: 2026-01-10T10:17:18.7925879

## Содержание

# Нечистые функции

Невозможно создать программу полностью из чистых функции. Программа, полностью состоящая из чистых функций, не сможет взаимодействовать с внешним миром. Такая программа бесполезна. У программы должна быть возможность отправлять запросы к серверам или выводить информацию на экран.

Функциональный подход состоит в том, чтобы составить большую часть программы из чистых функций, а нечистые функции должны пребывать в обособленных местах программы, и к ним будет особое отношение .

## Признаки нечистоты функции

### Присутствие в определении функции типа Unit

Если в выходном значении присутствует тип Unit, то однозначно можно сказать, что данная функция нечистая.

### Неполное количество параметров функции

Не все используемые аргументы в теле функции описаны как параметры функции. Это означает, что функция использует внешние значения, которые могут быть изменены, что приведет к изменению работы функции.

### Использование нечистых функций

Если в теле функции используется другая нечистая функция, то и сама функция становится нечистой. Нечистая функция *"заражает*" своей нечистотой другие функции. Поэтому необходимо "изолировать" нечистые функции, и использовать их только в специально отведенных зонах кода.

### Модификация входящих структур данных

Модификация структуры данных, вместо создания новой копии, является нечистой операцией, так как используемые методы модификации являются нечистыми. Однако, модификация структуры данных созданной внутри функции не делает её нечистой, так как такая структура еще не доступна другим функциям.

### Функция умеет выводить результат способом, не описанным как выходной результат

Есть различные случаи, когда функция помимо заявленного выходного значения может давать незаявленное значение или эффекты. Такими особенными значениями могут быть аппаратные или программные ошибки, прерывания работы функции. Такие результаты работы функции трудно определимы по телу функции. Если это преднамеренное поведение функции, то функция является нечистой.

Однако каждая функция, выполняемая на компьютере, может по причинам, не зависящим от её кода, выдать ошибку или прервать своё выполнение, что фактически делает каждую функцию нечистой. Но такая случайность игнорируется как маловероятная.

## Контролируемая нечистота функций

Во некоторых случаях формально функция не является чистой, так как она явно нарушает определение чистоты функции. Однако можно признать её чистой, если:

- нарушения чистоты жестко контролируются (например методы у неизменяемых данных используют скрытые параметры, но фактически, эти параметры невозможно изменить)

- нарушения чистоты не влияют на бизнес логику программы (например запись в журнал логирования или трассировки можно признать вспомогательной особенностью функции)

---

### Полные данные JSON

<details>
<summary>Показать JSON данные</summary>

```json
{
  "name" : "text",
  "text" : "<h1 style=\"text-align:center;\">Нечистые функции</h1>\n\n<p>Невозможно создать программу полностью из чистых функции. Программа, полностью состоящая из чистых функций, не сможет взаимодействовать с внешним миром. Такая программа бесполезна. У программы должна быть возможность отправлять запросы к серверам или выводить информацию на экран.</p>\n\n<p>Функциональный подход состоит в том, чтобы составить большую часть программы из чистых функций, а нечистые функции должны пребывать в обособленных местах программы, и к ним будет особое отношение .</p>\n\n<h2 style=\"text-align:center;\">Признаки нечистоты функции</h2>\n\n<h3 style=\"text-align:center;\">Присутствие в определении функции типа Unit</h3>\n\n<p>Если в выходном значении присутствует тип Unit, то однозначно можно сказать, что данная функция нечистая.</p>\n\n<h3 style=\"text-align:center;\">Неполное количество параметров функции</h3>\n\n<p>Не все используемые аргументы в теле функции описаны как параметры функции. Это означает, что функция использует внешние значения, которые могут быть изменены, что приведет к изменению работы функции.</p>\n\n<h3 style=\"text-align:center;\">Использование нечистых функций</h3>\n\n<p>Если в теле функции используется другая нечистая функция, то и сама функция становится нечистой. Нечистая функция <em>\"заражает</em>\" своей нечистотой другие функции. Поэтому необходимо \"изолировать\" нечистые функции, и использовать их только в специально отведенных зонах кода.</p>\n\n<h3 style=\"text-align:center;\">Модификация входящих структур данных</h3>\n\n<p>Модификация структуры данных, вместо создания новой копии, является нечистой операцией, так как используемые методы модификации являются нечистыми. Однако, модификация структуры данных созданной внутри функции не делает её нечистой, так как такая структура еще не доступна другим функциям.</p>\n\n<h3 style=\"text-align:center;\">Функция умеет выводить результат способом, не описанным как выходной результат</h3>\n\n<p>Есть различные случаи, когда функция помимо заявленного выходного значения может давать незаявленное значение или эффекты. Такими особенными значениями могут быть аппаратные или программные ошибки, прерывания работы функции. Такие результаты работы функции трудно определимы по телу функции. Если это преднамеренное поведение функции, то функция является нечистой.</p>\n\n<p><span style=\"background-color:#ffffff; color:#0d0d0d; font-size:16px; text-align:start;\">Однако каждая функция, выполняемая на компьютере, может по причинам, не зависящим от её кода, выдать ошибку или прервать своё выполнение, что фактически делает каждую функцию нечистой. Но такая случайность игнорируется как маловероятная.</span></p>\n\n<h2 style=\"text-align:center;\">Контролируемая нечистота функций</h2>\n\n<p>Во некоторых случаях формально функция не является чистой, так как она явно нарушает определение чистоты функции. Однако можно признать её чистой, если:</p>\n\n<ul>\n\t<li>нарушения чистоты жестко контролируются (например методы у неизменяемых данных используют скрытые параметры, но фактически, эти параметры невозможно изменить)</li>\n\t<li>нарушения чистоты не влияют на бизнес логику программы (например запись в журнал логирования или трассировки можно признать вспомогательной особенностью функции)</li>\n</ul>",
  "video" : null,
  "options" : {
    
  },
  "subtitle_files" : [
  ],
  "is_deprecated" : false
}
```

</details>
