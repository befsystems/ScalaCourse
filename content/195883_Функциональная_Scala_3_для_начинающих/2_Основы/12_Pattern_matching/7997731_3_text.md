# Материал (Шаг 3)

## Информация о шаге

- **ID шага**: 7997731
- **Позиция**: 3
- **Тип**: text
- **Курс**: Функциональная Scala 3 для начинающих
- **Экспортирован**: 2026-01-10T10:17:08.6102644

## Содержание

# Основные типы шаблонов

## Шаблон-литерал

Шаблон-литерал соответствует только самому себе. В качестве шаблона может использоваться любой литерал примитивного типа:

val x = 42
x match
case 5 => "пять"
case 5L => "пять (Long)"
case 0x5 => "пять (шестнадцатеричное)"
case 0b101 => "пять (двоичное)"
case true => "истина"
case 'A' => "символ A"
case '\n' => "перевод строки"
case '\u0041' => "Unicode символ A"
case 3.14 => "число пи"
case 3.14f => "число пи (Float)"
case _ => "что-то другое"

## Шаблон с логическими условиями

Шаблону можно указать дополнительные логические условия с помощью ключевого слова `if`. Такие шаблоны называются защищёнными (guarded patterns):

// Пример с числами
val x: Int = -5
val result: String = x match
case n if n > 100 => s"Большое число: $n"
case n if n > 0 && n % 2 == 0 => s"Положительное четное: $n"
case n if n > 0 => s"Положительное нечетное: $n"
case 0 => "Ноль"
case n if n < 0 && n > -10 => s"Малое отрицательное: $n"
case n => s"Большое отрицательное: $n"
result // = "Малое отрицательное: -5"

// Пример со строками
val value: String = "Hello, World!"
val result: String = value match
case s: String if s.length > 10 => s"Длинная строка: '$s'"
case s: String if s.nonEmpty => s"Короткая строка: '$s'"
case s: String => "Пустая строка"
result // = "Длинная строка: 'Hello, World!'"

// Пример с символами
val value: Char = 'A'
val result: String = value match
case c: Char if c.isLetter => s"Буква: $c"
case c: Char if c.isDigit => s"Цифра: $c"
result // = "Буква: A"

Логические условия в защищённых шаблонах могут использовать:

- Сопоставляемое значение

- Внешние значения

- Любые логические выражения

## Множественные шаблоны в одной альтернативе

val n: Int = 7
val result: String = n match
case 0 | 1 => "Ноль или единица" // Альтернатива с несколькими шаблонами
case 2 | 3 | 5 | 7 => "Простое число (малое)" // Альтернатива с четырьмя шаблонами
case n if n >= 10 && n <= 99 => "Двузначное число" // Альтернатива с условием
case n if n >= 100 && n <= 999 => "Трёхзначное число"
case n if n < 0 => "Отрицательное число"
case _ => "Большое положительное число" // Альтернатива по умолчанию

result // = "Простое число (малое)"

В альтернативе `case 2 | 3 | 5 | 7 =>` символ `|` означает логическое "ИЛИ" — альтернатива сработает, если значение совпадет с любым из перечисленных шаблонов.

## Типизированный шаблон

Данные шаблоны проверяют совпадение значения с определенным типом:

val x = 3.14
val result: String = x match
case _: Int => "тип Int"
case _: Long => "тип Long"
case _: Float => "тип Float"
case _: Double => "тип Double"
case _: Char => "тип Char"
case _: Boolean => "тип Boolean"
case _: Byte => "тип Byte"
case _: Short => "тип Short"
case _ => "другой тип"

result // = "тип Double"

## Использование значения шаблона

При необходимости использования значения шаблона, ему можно присвоить произвольное имя в конкретной альтернативе:

val x = 123L
val result: String = x match
case _: Int => "тип Int" // Значение шаблона не используется
case n: Long => s"тип Long, значение $n" // Значение шаблона имеет имя n и тип Long
case c: Char => s"тип Char, символ '$c'" // Значение шаблона имеет имя c и тип Char
case b: Boolean => s"логическое: $b" // Значение шаблона имеет имя b и тип Boolean
case _ => "другой тип"

result // = "тип Long, значение 123"

## Шаблон - внешнее значение

Шаблон может использовать значение, которое было вычислено заранее (внешнее значение). В этом случае имя значения необходимо заключить в обратные кавычки, чтобы не было путаницы с созданием новых локальных значений:

val magicNumber = 42
val threshold = 100
val specialChar = 'X'

val value = 100
val result: String = value match
case `magicNumber` => "Это магическое число!" // Использует внешнее значение magicNumber
case `threshold` => "Достигнут порог!" // Использует внешнее значение threshold
case `specialChar` => "Специальный символ!" // Использует внешнее значение specialChar
case n: Int => s"Другое число: $n" // Создает новое локальное значение n
case localValue => s"Локальное значение: $localValue" // Создает новое локальное значение localValue

result // = "Достигнут порог!"

**Важная разница:**

- `case `внешнееЗначение`` - сопоставление с внешним значением

- `case локальноеЗначение` - создание нового значения, которое содержит проверяемое значение

---

### Полные данные JSON

<details>
<summary>Показать JSON данные</summary>

```json
{
  "name" : "text",
  "text" : "<h1 style=\"text-align:center;\">Основные типы шаблонов</h1>\n\n<h2 style=\"text-align:center;\">Шаблон-литерал</h2>\n\n<p>Шаблон-литерал соответствует только самому себе. В качестве шаблона может использоваться любой литерал примитивного типа:</p>\n\n<pre><code class=\"language-scala\">val x = 42\nx match\n  case 5 =&gt; \"пять\"\n  case 5L =&gt; \"пять (Long)\"\n  case 0x5 =&gt; \"пять (шестнадцатеричное)\"\n  case 0b101 =&gt; \"пять (двоичное)\"\n  case true =&gt; \"истина\"\n  case 'A' =&gt; \"символ A\"\n  case '\\n' =&gt; \"перевод строки\"\n  case '\\u0041' =&gt; \"Unicode символ A\"\n  case 3.14 =&gt; \"число пи\"\n  case 3.14f =&gt; \"число пи (Float)\"\n  case _ =&gt; \"что-то другое\"\n</code></pre>\n\n<h2 style=\"text-align:center;\">Шаблон с логическими условиями</h2>\n\n<p>Шаблону можно указать дополнительные логические условия с помощью ключевого слова <code>if</code>. Такие шаблоны называются защищёнными (guarded patterns):</p>\n\n<pre><code class=\"language-scala\">// Пример с числами\nval x: Int = -5\nval result: String = x match\n  case n if n &gt; 100 =&gt; s\"Большое число: $n\"\n  case n if n &gt; 0 &amp;&amp; n % 2 == 0 =&gt; s\"Положительное четное: $n\"  \n  case n if n &gt; 0 =&gt; s\"Положительное нечетное: $n\"\n  case 0 =&gt; \"Ноль\"\n  case n if n &lt; 0 &amp;&amp; n &gt; -10 =&gt; s\"Малое отрицательное: $n\"\n  case n =&gt; s\"Большое отрицательное: $n\"\nresult // = \"Малое отрицательное: -5\"\n\n// Пример со строками\nval value: String = \"Hello, World!\"\nval result: String = value match\n  case s: String if s.length &gt; 10 =&gt; s\"Длинная строка: '$s'\"\n  case s: String if s.nonEmpty =&gt; s\"Короткая строка: '$s'\" \n  case s: String =&gt; \"Пустая строка\"\nresult // = \"Длинная строка: 'Hello, World!'\"\n\n// Пример с символами\nval value: Char = 'A'\nval result: String = value match\n  case c: Char if c.isLetter =&gt; s\"Буква: $c\"\n  case c: Char if c.isDigit =&gt; s\"Цифра: $c\"\nresult // = \"Буква: A\"</code></pre>\n\n<p>Логические условия в защищённых шаблонах могут использовать:</p>\n\n<ul>\n\t<li>Сопоставляемое значение</li>\n\t<li>Внешние значения</li>\n\t<li>Любые логические выражения</li>\n</ul>\n\n<h2 style=\"text-align:center;\">Множественные шаблоны в одной альтернативе</h2>\n\n<pre><code class=\"language-scala\">val n: Int = 7\nval result: String = n match\n  case 0 | 1 =&gt; \"Ноль или единица\"                    // Альтернатива с несколькими шаблонами\n  case 2 | 3 | 5 | 7 =&gt; \"Простое число (малое)\"      // Альтернатива с четырьмя шаблонами\n  case n if n &gt;= 10 &amp;&amp; n &lt;= 99 =&gt; \"Двузначное число\" // Альтернатива с условием\n  case n if n &gt;= 100 &amp;&amp; n &lt;= 999 =&gt; \"Трёхзначное число\"\n  case n if n &lt; 0 =&gt; \"Отрицательное число\"  \n  case _ =&gt; \"Большое положительное число\"             // Альтернатива по умолчанию\n\nresult // = \"Простое число (малое)\"\n</code></pre>\n\n<p>В альтернативе <code>case 2 | 3 | 5 | 7 =&gt;</code> символ <code>|</code> означает логическое \"ИЛИ\" — альтернатива сработает, если значение совпадет с любым из перечисленных шаблонов.</p>\n\n<h2 style=\"text-align:center;\">Типизированный шаблон</h2>\n\n<p>Данные шаблоны проверяют совпадение значения с определенным типом:</p>\n\n<pre><code class=\"language-scala\">val x = 3.14\nval result: String = x match\n  case _: Int =&gt; \"тип Int\"\n  case _: Long =&gt; \"тип Long\"\n  case _: Float =&gt; \"тип Float\"\n  case _: Double =&gt; \"тип Double\"\n  case _: Char =&gt; \"тип Char\"\n  case _: Boolean =&gt; \"тип Boolean\"\n  case _: Byte =&gt; \"тип Byte\"\n  case _: Short =&gt; \"тип Short\"\n  case _ =&gt; \"другой тип\"\n\nresult // = \"тип Double\"\n</code></pre>\n\n<h2 style=\"text-align:center;\">Использование значения шаблона</h2>\n\n<p>При необходимости использования значения шаблона, ему можно присвоить произвольное имя в конкретной альтернативе:</p>\n\n<pre><code class=\"language-scala\">val x = 123L\nval result: String = x match\n  case _: Int =&gt; \"тип Int\"                    // Значение шаблона не используется\n  case n: Long =&gt; s\"тип Long, значение $n\"   // Значение шаблона имеет имя n и тип Long\n  case c: Char =&gt; s\"тип Char, символ '$c'\"   // Значение шаблона имеет имя c и тип Char\n  case b: Boolean =&gt; s\"логическое: $b\"       // Значение шаблона имеет имя b и тип Boolean\n  case _ =&gt; \"другой тип\"\n\nresult // = \"тип Long, значение 123\"\n</code></pre>\n\n<h2 style=\"text-align:center;\">Шаблон - внешнее значение</h2>\n\n<p>Шаблон может использовать значение, которое было вычислено заранее (внешнее значение). В этом случае имя значения необходимо заключить в обратные кавычки, чтобы не было путаницы с созданием новых локальных значений:</p>\n\n<pre><code class=\"language-scala\">val magicNumber = 42\nval threshold = 100\nval specialChar = 'X'\n\nval value = 100\nval result: String = value match\n  case `magicNumber` =&gt; \"Это магическое число!\"           // Использует внешнее значение magicNumber\n  case `threshold` =&gt; \"Достигнут порог!\"                  // Использует внешнее значение threshold  \n  case `specialChar` =&gt; \"Специальный символ!\"             // Использует внешнее значение specialChar\n  case n: Int =&gt; s\"Другое число: $n\"                      // Создает новое локальное значение n\n  case localValue =&gt; s\"Локальное значение: $localValue\"   // Создает новое локальное значение localValue\n\nresult // = \"Достигнут порог!\"</code></pre>\n\n<p><strong>Важная разница:</strong></p>\n\n<ul>\n\t<li><code>case `внешнееЗначение`</code> - сопоставление с внешним значением</li>\n\t<li><code>case локальноеЗначение</code> - создание нового значения, которое содержит проверяемое значение</li>\n</ul>",
  "video" : null,
  "options" : {
    
  },
  "subtitle_files" : [
  ],
  "is_deprecated" : false
}
```

</details>
