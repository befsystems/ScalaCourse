# Архитектура процесса разработки

## Обзор

Этот документ описывает архитектуру **процесса разработки курса** - модульную систему управления проектом для создания учебных материалов по Scala.

> **Примечание**: Это НЕ архитектура кодовой базы Scala проекта. Это архитектура процесса создания учебных материалов с использованием промптов, планов и задач.

## Четыре столпа системы

```
┌─────────────────────────────────────────────────────────────┐
│                    ПРОЕКТ КУРСА SCALA                        │
└─────────────────────────────────────────────────────────────┘
                              │
        ┌─────────────────────┼─────────────────────┐
        │                     │                     │
        ▼                     ▼                     ▼
   ┌─────────┐          ┌─────────┐          ┌─────────┐
   │ prompts/│          │ plans/  │          │ tasks/  │
   │ СТАТИКА │          │СТРАТЕГИЯ│          │ ТАКТИКА │
   └─────────┘          └─────────┘          └─────────┘
        │                     │                     │
        ▼                     ▼                     ▼
 Инструментарий      Что достичь          Как выполнить
 (библиотека)        (дни/недели)         (часы/день)
```

## 1. prompts/ - Статический инструментарий

**Назначение**: Библиотека переиспользуемых блоков для создания промптов

**Характеристики:**
- ✓ Редко меняется
- ✓ Переиспользуется
- ✓ Версионируется как библиотека
- ✓ Композитная архитектура

## 2. plans/ - Стратегические планы

**Назначение**: Высокоуровневые цели и направления развития курса

```
plans/
├── course/           # Roadmap, разделы, вехи
├── content/          # Планы по контенту
├── technical/        # Технические планы
├── archive/          # Завершенные планы
└── STRUCTURE.md      # Документация
```

**Характеристики:**
- ✓ Средняя динамика (обновляется еженедельно)
- ✓ Декомпозируется на задачи
- ✓ Горизонт: дни/недели
- ✓ Ссылается на tasks/

**Примеры:**
- `course/roadmap.md` - общий roadmap курса
- `content/lessons/collections.md` - план серии уроков про коллекции
- `technical/automation.md` - план автоматизации

## 3. tasks/ - Исполнительские задачи

**Назначение**: Конкретные атомарные действия для выполнения

```
tasks/
├── board/            # Kanban-доска (todo, in-progress, done, blocked)
├── by-type/          # Задачи по типам
│   ├── content/      # Контентные задачи
│   ├── technical/    # Технические задачи
│   └── planning/     # Задачи планирования
├── archive/          # Архив выполненных
└── STRUCTURE.md      # Документация
```

**Характеристики:**
- ✓ Высокая динамика (обновляется ежедневно/ежечасно)
- ✓ Атомарные действия
- ✓ Горизонт: часы/день
- ✓ Kanban с WIP limit (1-3 задачи)

**Примеры:**
- `board/in-progress.md` - текущие задачи
- `by-type/content/lesson-pattern-matching.md` - написать урок
- `by-type/technical/automation-sync.md` - создать скрипт синхронизации

## 4. content/ - Результаты работы

**Назначение**: Готовый контент курса

```
content/
├── [lesson-name]/    # Каталоги уроков
│   ├── *.step        # Оригинальные файлы Stepik (JSON)
│   └── *.md          # Конвертированные для чтения
```

**Характеристики:**
- ✓ Результат выполнения tasks
- ✓ Загружается с/на Stepik
- ✓ Версионируется в Git

## Рабочие процессы

Система поддерживает полный цикл разработки:

```
requirements → research → plans → tasks → content
(внешние)     (анализ)   (стратегия) (тактика) (результат)
```

**Основные процессы:**
- Обработка требований от стейкхолдеров
- Проведение исследований при неопределённости
- Стратегическое планирование (дни/недели)
- Тактическое выполнение через Kanban (часы/день)
- Создание и версионирование контента

**Детальное описание workflow**: См. [WORKFLOW.md](WORKFLOW.md) для:
- Пошаговых инструкций по каждому процессу
- Сценариев работы с примерами
- Decision trees и чек-листов
- Ежедневного/еженедельного workflow

## Связи между компонентами

```
┌──────────┐
│ prompts/ │◄────── используются ──────┐
└──────────┘                            │
                                        │
┌──────────┐         ссылается         │
│  plans/  │◄───────────────┐          │
└──────────┘                │          │
     │                      │          │
     │ декомпозиция         │          │
     ▼                      │          │
┌──────────┐                │          │
│  tasks/  │────────────────┘          │
└──────────┘                            │
     │                                  │
     │ создает                          │
     ▼                                  │
┌──────────┐                            │
│ content/ │                            │
└──────────┘                            │
     │                                  │
     └───────── требует промпты ────────┘
```

## Команды быстрого доступа

Все команды определены в `prompts/agents/quick-commands.md`:

### Роли
```
@prompt-architect    - архитектор промптов
@plan-manager       - менеджер планов
```

### Промпты
```
@compose-prompt     - композиция промпта
@create-module      - создание модуля
```

### Планы
```
@create-plan        - создание плана
@update-plan        - обновление плана
@review-plan        - ревью плана
@archive-plan       - архивация плана
```

### Задачи
```
@create-task        - создание задачи
@start-task         - начать задачу
@complete-task      - завершить задачу
@update-task        - обновить задачу
@show-kanban        - показать доску
```

## Принципы архитектуры разработки

### 1. Разделение ответственности (SoC)
- Каждая папка имеет четкую ответственность
- Нет дублирования между уровнями
- Ясная иерархия абстракций

### 2. Модульность
- Промпты собираются из модулей
- Планы декомпозируются на задачи
- Компоненты независимы и переиспользуемы

### 3. Версионирование
- Всё хранится в Git
- История изменений прозрачна
- Можно откатить любые изменения

### 4. Прозрачность
- Структура файловой системы отражает процесс
- Статус видим через файлы
- Документация встроена в систему

### 5. Масштабируемость
- Легко добавлять новые модули
- Легко добавлять новые планы и задачи
- Система растет вместе с проектом

## Соглашения по именованию

### Файлы
```
plans/content/lessons/[topic].md           # План урока
tasks/by-type/content/lesson-[topic].md    # Задача создания урока
prompts/modules/lesson/[aspect].md         # Модуль для уроков
prompts/composed/[topic]/v[N].md           # Версия промпта
```

### ID задач
```
TASK-YYYY-MM-DD-NNN
TASK-2025-12-22-001
```

### Коммиты
```
plan: [действие с планом]
task: [действие с задачей]
prompt: [действие с промптом]
content: [действие с контентом]

Примеры:
plan: создан roadmap курса
task: завершена TASK-001 - урок про Pattern Matching
prompt: добавлен модуль lesson/interactive-elements
content: обновлен урок про коллекции
```

## Метрики и мониторинг

### Отслеживаемые метрики

**Планы:**
- Количество активных планов
- Прогресс выполнения (% задач)
- Блокирующие зависимости

**Задачи:**
- Velocity (задачи в неделю)
- WIP (work in progress)
- Время выполнения (оценка vs факт)
- Распределение по типам

**Промпты:**
- Количество модулей
- Частота использования
- Версии и итерации

## Лучшие практики

### ✅ DO
- Создавай задачи из планов
- Используй промпты для консистентности
- Обновляй статусы регулярно
- Версионируй изменения в Git
- Связывай планы, задачи и результаты
- Архивируй завершенное

### ❌ DON'T
- Не дублируй информацию между уровнями
- Не создавай задачи без связи с планом (если применимо)
- Не превышай WIP limit (1-3 задачи)
- Не оставляй задачи без обновлений
- Не смешивай уровни абстракции

## Документация

**Главная документация:**
- `CLAUDE.md` - краткое руководство для Claude Code (quick start)
- `DEVELOPMENT.md` (этот файл) - архитектура системы управления проектом
- `WORKFLOW.md` - практическое руководство по рабочим процессам

**Документация подсистем** (STRUCTURE.md):
- `prompts/STRUCTURE.md` - модульная система промптов
- `requirements/STRUCTURE.md` - бизнес-требования
- `research/STRUCTURE.md` - исследования
- `plans/STRUCTURE.md` - стратегические планы
- `tasks/STRUCTURE.md` - Kanban-доска задач

---

**Версия**: 1.0
**Дата**: 2025-12-22
**Статус**: Архитектура процесса разработки определена и готова к использованию
